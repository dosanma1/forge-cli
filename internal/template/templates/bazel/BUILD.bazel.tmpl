"""Root BUILD file for {{.ProjectName}}"""

{{if .HasFrontend}}load("@aspect_bazel_lib//lib:copy_to_bin.bzl", "copy_to_bin")
{{end}}load("@gazelle//:def.bzl", "gazelle")

package(default_visibility = ["//visibility:public"])

# Gazelle configuration for Go
# gazelle:prefix github.com/{{.GitHubOrg}}/{{.ProjectName}}
gazelle(name = "gazelle")

gazelle(
    name = "gazelle-update-repos",
    args = [
        {{range .Services}}"-from_file=backend/services/{{.Name}}/go.mod",
        {{end}}"-to_macro=deps.bzl%go_dependencies",
        "-prune",
    ],
    command = "update-repos",
)

# Export configuration files
exports_files([
    "tsconfig.json",
    "package.json",
])
